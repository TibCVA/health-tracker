<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suivi Santé</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .done { background-color: #f0fff4; }
    </style>
        <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body class="bg-gray-50">
    <div id="app"></div>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">
       const HealthTracker = () => {
  const [activeTab, setActiveTab] = React.useState('supplements');
  const [items, setItems] = React.useState(() => {
    const saved = localStorage.getItem('healthItems');
    return saved ? JSON.parse(saved) : {
      supplements: {
        morning: [
          { id: 1, name: 'Bisglycinate 240mg', done: false },
          { id: 2, name: 'Taurine 500mg', done: false },
        ],
        noon: [
          { id: 3, name: 'Bisglycinate 160mg', done: false },
          { id: 4, name: 'Omega 2 capsules', done: false },
        ],
        evening: [
          { id: 5, name: 'Bisglycinate 160mg', done: false },
          { id: 6, name: 'Omega 2 capsules', done: false },
        ],
      },
      exercises: {
        daily: [
          { id: 7, name: 'Étirements bas/haut', details: '2x30s' },
          { id: 8, name: 'Pompes scapulaires', details: '2x10' },
          { id: 9, name: 'Thread needle', details: '2x10' },
          { id: 10, name: 'Rentrée menton', details: '4x15' },
          { id: 11, name: 'Respiration', details: '5min' },
          { id: 12, name: 'Méditation', details: '30min' },
          { id: 13, name: 'Vacuum', details: '3x15s' },
        ],
        alternating: [
          { id: 14, name: 'Planche', details: '3x30s' },
          { id: 15, name: 'Body pull', details: '3x10' },
          { id: 16, name: 'Face pull', details: '3x10' },
          { id: 17, name: 'Prone Y raise', details: '2x15' },
          { id: 18, name: 'Bird dog', details: '3x10' },
          { id: 19, name: 'Glute bridge', details: '3x12' },
        ],
      },
    };
  });

  React.useEffect(() => {
    localStorage.setItem('healthItems', JSON.stringify(items));
  }, [items]);

  const toggleItem = (category, timing, id) => {
    setItems(prev => ({
      ...prev,
      [category]: {
        ...prev[category],
        [timing]: prev[category][timing].map(item =>
          item.id === id ? { ...item, done: !item.done } : item
        ),
      },
    }));
  };

  const addItem = (category, timing, name, details = '') => {
    const newId = Math.max(...Object.values(items[category]).flat().map(i => i.id), 0) + 1;
    setItems(prev => ({
      ...prev,
      [category]: {
        ...prev[category],
        [timing]: [...prev[category][timing], { id: newId, name, details, done: false }],
      },
    }));
  };

  const deleteItem = (category, timing, id) => {
    setItems(prev => ({
      ...prev,
      [category]: {
        ...prev[category],
        [timing]: prev[category][timing].filter(item => item.id !== id),
      },
    }));
  };

  const renderItem = (category, timing, item) => (
    <div key={item.id} className="flex items-center p-2 border rounded mb-2">
      <button
        onClick={() => toggleItem(category, timing, item.id)}
        className={`w-6 h-6 rounded-full border-2 mr-2 flex items-center justify-center
          ${item.done ? 'bg-green-500 border-green-500' : 'border-gray-400'}`}
      >
        {item.done && <span className="text-white">✓</span>}
      </button>
      <div className="flex-grow">
        <div>{item.name}</div>
        {item.details && <div className="text-sm text-gray-500">{item.details}</div>}
      </div>
      <button
        onClick={() => deleteItem(category, timing, item.id)}
        className="text-red-500 text-sm px-2"
      >
        ×
      </button>
    </div>
  );

  return (
    <div className="max-w-md mx-auto p-4">
      <div className="flex justify-between items-center mb-4">
        <h1 className="text-xl font-bold">Suivi Santé</h1>
        <div className="text-sm text-gray-500">{new Date().toLocaleDateString()}</div>
      </div>

      <div className="flex mb-4 border-b">
        <button
          className={`px-4 py-2 ${activeTab === 'supplements' ? 'border-b-2 border-blue-500' : ''}`}
          onClick={() => setActiveTab('supplements')}
        >
          Suppléments
        </button>
        <button
          className={`px-4 py-2 ${activeTab === 'exercises' ? 'border-b-2 border-blue-500' : ''}`}
          onClick={() => setActiveTab('exercises')}
        >
          Exercices
        </button>
      </div>

      {activeTab === 'supplements' && (
        <div>
          {Object.entries(items.supplements).map(([timing, timeItems]) => (
            <div key={timing} className="mb-6">
              <h2 className="font-semibold mb-2 capitalize">{timing}</h2>
              {timeItems.map(item => renderItem('supplements', timing, item))}
            </div>
          ))}
        </div>
      )}

      {activeTab === 'exercises' && (
        <div>
          {Object.entries(items.exercises).map(([type, typeItems]) => (
            <div key={type} className="mb-6">
              <h2 className="font-semibold mb-2">
                {type === 'daily' ? 'Quotidien' : 'Un jour sur deux'}
              </h2>
              {typeItems.map(item => renderItem('exercises', type, item))}
            </div>
          ))}
        </div>
      )}
    </div>
  );
};

ReactDOM.render(<HealthTracker />, document.getElementById('app'));
    </script>
</body>
</html>
